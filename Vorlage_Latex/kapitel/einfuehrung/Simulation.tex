\chapter{Simulation und Testplanung}
Um das Potentialfeld auch ohne Robotinos zu testen, wird zu Beginn des Projektes mit einer vereinfachten Simulation das Potentialfeld auf Ihre Funktionsfähigkeit geprüft. Bei dieser Simulation wird der Robotino als einfache I-Strecke betrachtet. Dabei wird der Ausgang der Strecke auf dem Istpositionsinput gegeben und der berechnete Geschwindigkeitsvektor auf die Strecke gegeben. Des Weiteren werden auf die restlichen Inputs Konstanten gegeben und die Ausgangsdaten in einer Logdatei abgespeichert. Da nach wenigen Versuchen erkennbar ist, dass das Potentialfeld seine Funktion erfüllt, wird im Folgenden mit den Robotinos direkt getestet. Dazu wird zu Beginn der Fertigungsbereich nicht betrachtet und nur ein fest programmiertes Ziel angefahren. Um flexibel Ziele anfahren zu können und die Schnittstelle mit der Fertigungsplanung zu testen, wird ein UDP-Dummy in Simulink erstellt, mit dem Aufträge an den Robotino per UDP in Simulink gesendet werden können. Dadurch können mehrere Ziele hintereinander Angefahren werden. Im nächsten Schritt wird die Schnittstelle mit der Bahnregelung getestet. Dazu werden beide Simulinkmodelle kombiniert und auf den Robotino geladen. Dadurch können Schnittstellenprobleme zwischen der Bahnregelung und der Bahnplanung frühzeitig behoben werden. Da sich im Laufe des Projektes gezeigt hat, dass die Fertigungsplanung den Gesamtsystemtesttermin nicht einhalten kann, wird der UDP-Dummy in Zusammenarbeit mit der Bahnregelung dahingehend erweitert, zufallsgenerierte Aufträge zu senden. Im letzten Schritt wird der UDP-Dummy als Fertigungsplanungsersatz erweitert indem sich die Positionen der Werkstücke gemerkt werden und die zufallsgenerierten Aufträge auf ausführbare Aufträge gefiltert wird. Zum Ende des Projektes wird zusätzlich eine Simulation, wie zu Beginn, mit der Erweiterung auf fünf Robotinos ausgeführt, um geringe Änderungen im Programm aufzuzeichnen, da die Aufzeichnung von Daten von mehreren Robotinos unter Simulink-Realtime einige Probleme verursacht. Unter Kapitel \ref{sec:simAusw} wird eine Simulation des Ausweichmanövers dargestellt und unter Kapitel \ref{sec:simWarte} wird das Verhalten beim Anfahren der Wartebereiche gezeigt.

\section{Simulation des Ausweichmanövers}\label{sec:simAusw}
In diesem Abschnitt wird die Simulation des Ausweichmanövers dargestellt. Dazu werden zwei Simulationen miteinander verglichen. In der ersten Simulation, welche in Abbildung \ref{fig:SimulationAusweich} dargestellt ist, werden zwei Robotinos betrachtet. Robotino 1, in Rot dargestellt, fährt von der Position [500 1000] zur Station 7, welche sich ganz rechts befindet. Robotino 2, in Blau dargestellt, fährt von der Position [4500 1000] zur Station 0, welche sich ganz links befindet. Wie in der Abbildung zu sehen ist, umfahren sich die Robotinos rechts herum.

\begin{figure}
	\centering	\includegraphics[width=0.8\textwidth,angle=-90]{grafiken/SimulationAusweich.pdf}
	\caption{Simulation mit Ausweichfunktion}
	\label{fig:SimulationAusweich}
\end{figure}

In der zweiten Simulation, welche in Abbildung \ref{fig:SimulationohneAusweich} dargestellt ist, werden die gleichen Robotinos mit der gleichen Start und Zielposition betrachtet. In dieser Simulation wird lediglich die Ausweichfunktion auf Null gesetzt. Wie in der Abbildung zu erkennen ist, kommt es zu einem Abstoßverhalten, wodurch die Robotinos stark ausgebremst werden. Wie in den Abbildungen zu erkennen ist, hat die entwickelte Ausweichfunktion eine Verbesserung im Ausweichverhalten verursacht.
 
\begin{figure}
	\centering	\includegraphics[width=0.8\textwidth,angle=-90]{grafiken/Simulation_ohne_Ausweich}
	\caption{Simulation ohne Ausweichfunktion}
	\label{fig:SimulationohneAusweich}
\end{figure}

\section{Simulation Wartebereiche}\label{sec:simWarte}
In diesem Abschnitt wird eine Simulation der Wartebereiche durchgeführt. Dazu werden vier Robotinos im Transportbereich verteilt und sollen das selbe Ziel anfahren. Dadurch kann man das Verhalten der Robotinos bei der Nutzung der Wartepositionen beobachten. In Abbildung \ref{fig:SimulationFIFO} ist das Ergebnis der Simulation dargestellt. Die Zielstation wird in dieser Simulation als 2 definiert. Dabei ist zu erkennen, dass der Robotino mit der Startposition [2000 1000], in Grün dargestellt, als erster das Ziel erreicht.\\
Wie am nächsten Robotino, in Blau dargestellt, zu erkennen ist, wird von seiner Startposition ([1000 500]) erst die Station als Ziel angenommen. Da sich in diesem Moment jedoch der grüne Robotino in seiner Fahrtrichtung befindet, wird das unter Kapitel \ref{sec:simAusw} bereits simulierte Ausweichmanöver angewendet, bis der grüne Robotino die Station erreicht hat. Dieser Zeitpunkt ist in der Abbildung als schlagartige Richtungsänderung erkennbar, da in diesem Moment das Ziel auf die erste Warteposition geändert wird. Da sich auf dem Weg zum neuen Ziel keine Robotinos befinden, trifft der blaue Robotino auf der ersten Warteposition als erster ein.\\
Der rote Robotino, mit der Startposition [5000 1000], zeigt bei seiner Fahrt ein ähnliches Verhalten wie der blaue. An der Route kann erkannt werden, dass zuerst gerade auf die Station zugefahren wird. In nächstem Schritt wird Schlagartig die Richtung auf die erste Warteposition geändert, da der grüne Robotino die Station erreicht hat. Die nächste Auffälligkeit besteht darin, dass das Ausweichmanöver aufgrund des blauen Robotinos ausgelöst wird. Dadurch wird der Robotino von seiner Ideallinie abgebracht. Da sich der rote Robotino, aufgrund des Ausweichmanövers, beim Eintreffen des blauen Robotinos, auf der ersten Warteposition auf der linken Seite der ersten Warteposition befindet, wird der auf der ersten Warteposition befindliche Robotino umfahren, da sich die Wartepositionen bei geraden Zielstationen nach rechts anhängen.\\
Als letztes wird der cyane Robotino betrachtet. Da dieser Robotino über den Stationen ([1000 3500]) startet, wird dieser zuerst über die Führungspotentialfelder zur Hauptfahrzone transportiert. Da sich der grüne Robotino beim Wechsel zur Hauptfahrzone bereits in der Station befindet, wird direkt die erste Warteposition als Ziel definiert. Da dieser Robotino auf seiner Route auf den roten Robotino trifft, wird auch hier im Laufe der Route ein Ausweichmanöver erkennbar. Da sich auch dieser Robotino auf die nächsten Wartepositionen begeben möchte, sich jedoch der rote Robotino immer vor ihm befindet, stellt sich der cyane Robotino im Laufe der Simulation auf die dritte Warteposition.
\begin{figure}
	\centering	\includegraphics[width=0.8\textwidth,angle=-90]{grafiken/Simulation_FiFo}
	\caption{Simulation der Wartebereiche}
	\label{fig:SimulationFIFO}
\end{figure}